services:
  storyboard-web:
    build:
      context: ./web
      dockerfile: Dockerfile
    container_name: director-ai-web
    ports:
      - "${GRADIO_PORT:-7861}:7861"
    environment:
      NANA_BANANA_API_KEY: ${NANA_BANANA_API_KEY:-}
      NANA_BANANA_BASE_URL: ${NANA_BANANA_BASE_URL:-https://api.nanabanana.pro}
      IMAGE_BACKEND: ${IMAGE_BACKEND:-api}
      GRADIO_HOST: 0.0.0.0
      GRADIO_PORT: 7861
      API_HOST: 0.0.0.0
      API_PORT: ${API_PORT:-8000}
      CORS_ORIGINS: ${CORS_ORIGINS:-*}
      MAX_UPLOAD_SIZE_MB: ${MAX_UPLOAD_SIZE_MB:-50}
      COMFYUI_ENABLED: ${COMFYUI_ENABLED:-false}
      COMFYUI_HOST: ${COMFYUI_HOST:-host.docker.internal}
      COMFYUI_PORT: ${COMFYUI_PORT:-8188}
    volumes:
      - ./web:/app
      - director_ai_assets:/app/assets
      - director_ai_projects:/app/projects
      - director_ai_outputs:/app/outputs
      - director_ai_exports:/app/exports
      - director_ai_uploads:/app/uploads
    restart: unless-stopped

volumes:
  director_ai_assets:
  director_ai_projects:
  director_ai_outputs:
  director_ai_exports:
  director_ai_uploads:
