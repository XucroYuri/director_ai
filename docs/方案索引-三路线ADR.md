# 三路线方案索引（ADR 风格）

这份索引把 3 个方向的方案拆分为独立子目录，按 ADR（Architecture Decision Record）方式组织，方便评审、逐条决策、逐条落地。

## 方案 01：P0 基线

- 目录：`docs/方案-01-P0基线`
- 适用：优先“先跑起来、先不炸、先不泄密”。
- 入口：`docs/方案-01-P0基线/README.md`

## 方案 02：架构收敛

- 目录：`docs/方案-02-架构收敛`
- 适用：准备进入持续迭代阶段，想要更低维护成本、更强可测试性、更一致的错误/日志/网络层。
- 入口：`docs/方案-02-架构收敛/README.md`

## 方案 03：仓库拆分 / 模块化治理

- 目录：`docs/方案-03-仓库拆分`
- 适用：需要清晰产品边界、独立 CI/CD、减少 runtime 污染（Flutter vs Python）。
- 入口：`docs/方案-03-仓库拆分/README.md`

## Decision Matrix（成本/收益/风险/前置条件）

打分说明：

- 评分范围：1–5（5 = 越多/越高/越难，取决于维度含义）。
- 维度含义：
  - 成本：人天 + 变更面 + 回归成本（5 = 成本高）
  - 收益：对交付/稳定性/长期速度的提升（5 = 收益高）
  - 风险：引入回归或组织成本的概率与影响（5 = 风险高）
  - 前置条件：需要额外决策/资源/权限（5 = 前置条件多）

| 方案 | 成本 | 收益 | 风险 | 前置条件 | 适用场景 | 关键阻塞决策 |
| --- | --- | --- | --- | --- | --- | --- |
| 01 P0 基线 | 2 | 4 | 2 | 1 | 需要尽快“能跑、能交付、别泄密” | 基本无（偏工程问题） |
| 02 架构收敛 | 4 | 5 | 4 | 2 | 进入持续迭代期，维护成本上升明显 | 需要明确里程碑与回归策略 |
| 03 仓库拆分 | 3 | 4 | 3 | 4 | 团队协作复杂、CI 混乱、运行时互相污染 | ADR 0201（边界：web 是 backend 还是独立工具） |

### 方案 03 的“高杠杆”原因（结论）

- `web/` 与 Flutter 的关系一旦明确，仓库结构、CI/CD、Secrets 策略都会被迫收敛。
- 建议优先评审：`docs/方案-03-仓库拆分/adr/0201-decide-product-boundary-web-is-backend-or-independent.md`

## 评审建议顺序（最省脑）

1) 如果团队短期要交付：先过 `docs/方案-01-P0基线/adr/0001-...`
2) 如果团队要长期维护：再过 `docs/方案-02-架构收敛/adr/0101-...`
3) 如果要组织层面治理：最后过 `docs/方案-03-仓库拆分/adr/0201-...`
